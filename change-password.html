<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Change Password - Ride & Roam</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="settings.css">
</head>
<body class="settings-page">
  <header class="settings-header">
    <button id="back-btn" class="back-btn">‚Üê Back to Dashboard</button>
    <h1>Change Password</h1>
  </header>

  <main class="settings-main">
    <form class="change-password-form">
      <label for="current-password">Current Password</label>
      <input type="password" id="current-password" name="current-password" required>

      <label for="new-password">New Password</label>
      <input type="password" id="new-password" name="new-password" required>

      <label for="confirm-password">Confirm Password</label>
      <input type="password" id="confirm-password" name="confirm-password" required>

      <button type="submit" class="btn">Change Password</button>
      <div id="password-error" style="color:red;margin-top:10px;"></div>
    </form>
  </main>

  <script src="settings.js"></script>
  <script>
    document.getElementById('back-btn').addEventListener('click', () => window.location.href = 'dashboard.html');
    document.querySelector('.change-password-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const currentPass = document.getElementById('current-password').value;
      const newPass = document.getElementById('new-password').value;
      const confirmPass = document.getElementById('confirm-password').value;
      const storedPass = localStorage.getItem('rnr_user_password') || '';
      if (currentPass !== storedPass) {
        document.getElementById('password-error').textContent = 'Current password is incorrect.';
        return;
      }
      if (newPass !== confirmPass) {
        document.getElementById('password-error').textContent = 'New passwords do not match.';
        return;
      }
      if (newPass.length < 6) {
        document.getElementById('password-error').textContent = 'Password must be at least 6 characters.';
        return;
      }
      localStorage.setItem('rnr_user_password', newPass);
      document.getElementById('password-error').textContent = '';
      alert('Password changed successfully!');
      window.location.href = 'settings.html';
    });
  </script>
</body>
</html>
